# =============================================================================
# Production Secrets Template
# =============================================================================
# 사용 방법:
#   1. 이 파일을 prod-secrets.yaml로 복사
#   2. Terraform outputs에서 값 채우기
#   3. gitignore됨 - 절대 커밋하지 말 것
#
# Terraform outputs 조회:
#   cd terraform/prod/foundation
#   terraform output rds_address
#   terraform output redis_endpoint
#   terraform output rds_master_user_secret_arn
#   terraform output redis_auth_token_secret_arn

# =============================================================================
# External Database Hosts (Terraform outputs)
# =============================================================================
postgres:
  external:
    host: "wealist-prod-postgres.xxxxx.ap-northeast-2.rds.amazonaws.com"

redis:
  external:
    host: "wealist-prod-redis.xxxxx.cache.amazonaws.com"

# =============================================================================
# Monitoring Exporters (동일한 호스트 사용)
# =============================================================================
postgresExporter:
  config:
    host: "wealist-prod-postgres.xxxxx.ap-northeast-2.rds.amazonaws.com"

redisExporter:
  config:
    host: "wealist-prod-redis.xxxxx.cache.amazonaws.com"

# =============================================================================
# Application Secrets
# =============================================================================
# 주의: Plan 2에서 External Secrets Operator로 대체 예정
# 그 전까지는 이 값들을 수동으로 설정해야 함

shared:
  secrets:
    # -------------------------------------------------------------------------
    # Database Credentials
    # -------------------------------------------------------------------------
    # RDS 비밀번호 (Secrets Manager에서 조회)
    # aws secretsmanager get-secret-value --secret-id $(terraform output -raw rds_master_user_secret_arn)
    DB_PASSWORD: "from-aws-secrets-manager"

    # Redis AUTH 토큰 (Secrets Manager에서 조회)
    # aws secretsmanager get-secret-value --secret-id $(terraform output -raw redis_auth_token_secret_arn)
    REDIS_PASSWORD: "from-aws-secrets-manager"

    # -------------------------------------------------------------------------
    # JWT & Authentication
    # -------------------------------------------------------------------------
    # JWT Secret (최소 64자, base64 인코딩 권장)
    # 생성: openssl rand -base64 64
    JWT_SECRET: "generate-with-openssl-rand-base64-64-minimum"

    # -------------------------------------------------------------------------
    # OAuth2 (Google Cloud Console에서 생성)
    # -------------------------------------------------------------------------
    # https://console.cloud.google.com/apis/credentials
    GOOGLE_CLIENT_ID: "xxxxx.apps.googleusercontent.com"
    GOOGLE_CLIENT_SECRET: "GOCSPX-xxxxx"

    # -------------------------------------------------------------------------
    # S3 Credentials (Pod Identity 사용 시 비워두기)
    # -------------------------------------------------------------------------
    # EKS Pod Identity를 사용하면 자격 증명이 자동 주입됨
    # storage-service의 ServiceAccount에 IAM 역할이 연결되어 있음
    S3_ACCESS_KEY: ""
    S3_SECRET_KEY: ""

    # -------------------------------------------------------------------------
    # LiveKit (Video Service)
    # -------------------------------------------------------------------------
    # LiveKit Cloud 또는 Self-hosted LiveKit 서버 정보
    # https://cloud.livekit.io/ 에서 생성
    LIVEKIT_API_KEY: ""
    LIVEKIT_API_SECRET: ""

    # -------------------------------------------------------------------------
    # Internal API Key (서비스 간 통신)
    # -------------------------------------------------------------------------
    # 생성: openssl rand -hex 32
    INTERNAL_API_KEY: "generate-with-openssl-rand-hex-32"

# =============================================================================
# ECR Registry (ArgoCD에서 오버라이드하지 않을 경우)
# =============================================================================
# Terraform output: ecr_registry_url
global:
  imageRegistry: ""  # 예: 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com
