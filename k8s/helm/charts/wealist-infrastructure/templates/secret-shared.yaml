{{- if not (lookup "v1" "Secret" .Values.global.namespace "wealist-shared-secret") }}
apiVersion: v1
kind: Secret
metadata:
  name: wealist-shared-secret
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "wealist-infrastructure.labels" . | nindent 4 }}
    app.kubernetes.io/component: shared-secret
type: Opaque
stringData:
  # Database Credentials
  DB_PASSWORD: {{ .Values.shared.secrets.DB_PASSWORD | quote }}
  REDIS_PASSWORD: {{ .Values.shared.secrets.REDIS_PASSWORD | quote }}

  # S3/MinIO Credentials
  S3_ACCESS_KEY: {{ .Values.shared.secrets.S3_ACCESS_KEY | quote }}
  S3_SECRET_KEY: {{ .Values.shared.secrets.S3_SECRET_KEY | quote }}

  # Security
  INTERNAL_API_KEY: {{ .Values.shared.secrets.INTERNAL_API_KEY | quote }}
  JWT_SECRET: {{ .Values.shared.secrets.JWT_SECRET | quote }}

  # OAuth2 Credentials
  GOOGLE_CLIENT_ID: {{ .Values.shared.secrets.GOOGLE_CLIENT_ID | quote }}
  GOOGLE_CLIENT_SECRET: {{ .Values.shared.secrets.GOOGLE_CLIENT_SECRET | quote }}
{{- end }}
