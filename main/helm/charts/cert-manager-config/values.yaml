# =============================================================================
# cert-manager-config - Certificate Management for weAlist
# =============================================================================
# This chart installs cert-manager and configures ClusterIssuer for Let's Encrypt

certManager:
  # Enable/disable cert-manager installation and configuration
  enabled: false

  # Install cert-manager CRDs and controller (set false if already installed)
  installCertManager: true

  # ClusterIssuer configuration
  issuer:
    # Name of the ClusterIssuer (referenced in Ingress annotations)
    name: letsencrypt-prod

    # Email for Let's Encrypt notifications
    email: ""

    # ACME server URL
    # Production: https://acme-v02.api.letsencrypt.org/directory
    # Staging: https://acme-staging-v02.api.letsencrypt.org/directory
    server: "https://acme-v02.api.letsencrypt.org/directory"

  # ACME Challenge Solver configuration
  solver:
    # Challenge type: "http01" (recommended) or "dns01"
    # http01: No AWS credentials needed, just requires port 80 accessible
    # dns01: Requires AWS Route53 API access (more complex)
    type: http01

    # HTTP01 solver configuration (default, simpler)
    http01:
      # Ingress class to use for HTTP01 challenge
      ingressClass: nginx

    # DNS01 solver configuration (only if type: dns01)
    dns01:
      provider: route53
      route53:
        region: ap-northeast-2
        hostedZoneID: ""
        accessKeyID: ""

  # Route53 credentials secret (only needed for dns01)
  route53Secret:
    create: false
    name: route53-credentials
    secretAccessKey: ""

# -----------------------------------------------------------------------------
# cert-manager subchart configuration
# -----------------------------------------------------------------------------
cert-manager:
  # Install CRDs with the chart
  installCRDs: true

  # Resource limits for cert-manager pods
  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 128Mi

  # Webhook configuration
  webhook:
    resources:
      requests:
        cpu: 10m
        memory: 32Mi
      limits:
        cpu: 50m
        memory: 64Mi

  # CA Injector configuration
  cainjector:
    resources:
      requests:
        cpu: 10m
        memory: 32Mi
      limits:
        cpu: 50m
        memory: 128Mi
