<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.3.0 Chrome/140.0.7339.249 Electron/38.7.2 Safari/537.36" version="29.3.0">
  <diagram name="K8s Traffic Flow" id="k8s-traffic">
    <mxGraphModel dx="1226" dy="1210" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="900" background="#FFFFFF" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="g5JoQZOSH3qhmFWXojDC-2" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" value="" vertex="1">
          <mxGeometry height="838" width="970" x="120" y="12" as="geometry" />
        </mxCell>
        <mxCell id="title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=20;fontStyle=1;fontColor=#232F3E;" value="weAlist - Istio Traffic Flow" vertex="1">
          <mxGeometry height="35" width="400" x="400" y="15" as="geometry" />
        </mxCell>
        <mxCell id="external-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FF9900;strokeWidth=2;verticalAlign=top;align=left;spacingLeft=10;spacingTop=3;fontSize=12;fontStyle=1;fontColor=#FF9900;" value="Internet" vertex="1">
          <mxGeometry height="60" width="280" x="460" y="55" as="geometry" />
        </mxCell>
        <mxCell id="client" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#FF9900;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="Browser / App&#xa;(HTTPS)" vertex="1">
          <mxGeometry height="35" width="120" x="540" y="72" as="geometry" />
        </mxCell>
        <mxCell id="aws-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FF9900;strokeWidth=2;verticalAlign=top;align=left;spacingLeft=10;spacingTop=3;fontSize=12;fontStyle=1;fontColor=#FF9900;" value="AWS" vertex="1">
          <mxGeometry height="60" width="280" x="460" y="127" as="geometry" />
        </mxCell>
        <mxCell id="alb" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#FF9900;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="ALB (SSL Termination)" vertex="1">
          <mxGeometry height="35" width="180" x="510" y="140" as="geometry" />
        </mxCell>
        <mxCell id="istio-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#466BB0;strokeWidth=2;verticalAlign=top;align=left;spacingLeft=10;spacingTop=3;fontSize=12;fontStyle=1;fontColor=#466BB0;" value="istio-system" vertex="1">
          <mxGeometry height="75" width="280" x="460" y="200" as="geometry" />
        </mxCell>
        <mxCell id="istio-gw" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#466BB0;strokeWidth=2;fontSize=11;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="Istio Ingress Gateway" vertex="1">
          <mxGeometry height="35" width="180" x="510" y="232" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" edge="1" parent="1" source="client" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FF9900;endArrow=classic;endSize=8;" target="alb">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" edge="1" parent="1" source="alb" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#466BB0;endArrow=classic;endSize=8;" target="istio-gw">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vs-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#326CE5;strokeWidth=2;verticalAlign=top;align=left;spacingLeft=10;spacingTop=3;fontSize=12;fontStyle=1;fontColor=#326CE5;" value="VirtualService: wealist-routes" vertex="1">
          <mxGeometry height="205" width="900" x="150" y="295" as="geometry" />
        </mxCell>
        <mxCell id="route-table" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#326CE5;strokeWidth=1;fontSize=10;fontColor=#232F3E;align=left;verticalAlign=top;spacingLeft=10;spacingTop=8;" value="Route Rules&lt;br&gt;/api/svc/{name}/*  → {name}-service (6개)&lt;br&gt;/api/ops/*         → ops-service:8005&lt;br&gt;/api/ops-portal/*  → ops-portal:80&lt;br&gt;/api/monitoring/*  → observability stack&lt;br&gt;/*                 → frontend:80 (catch-all)" vertex="1">
          <mxGeometry height="100" width="240" x="345" y="310" as="geometry" />
        </mxCell>
        <mxCell id="route-detail" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#999999;strokeWidth=1;fontSize=9;fontColor=#333333;dashed=1;align=left;spacingLeft=8;spacingTop=5;" value="uriRegexRewrite: prefix 제거&#xa;WebSocket: board, chat (no timeout)&#xa;SSE: noti (no timeout)&#xa;storage: 120s timeout" vertex="1">
          <mxGeometry height="60" width="180" x="375" y="420" as="geometry" />
        </mxCell>
        <mxCell id="retry-note" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#ED7100;strokeWidth=1;fontSize=9;fontColor=#232F3E;dashed=1;align=left;spacingLeft=8;" value="Retry: 3 attempts, 10s&#xa;retryOn: 5xx, reset" vertex="1">
          <mxGeometry height="35" width="140" x="660" y="310" as="geometry" />
        </mxCell>
        <mxCell id="canary-note" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#466BB0;strokeWidth=1;fontSize=9;fontColor=#232F3E;dashed=1;align=left;spacingLeft=8;" value="Canary: weight-based&#xa;stable/canary routing" vertex="1">
          <mxGeometry height="35" width="140" x="660" y="380" as="geometry" />
        </mxCell>
        <mxCell id="cors-note" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#388E3C;strokeWidth=1;fontSize=9;fontColor=#232F3E;dashed=1;align=left;spacingLeft=8;" value="CORS: wealist.co.kr&#xa;localhost:*" vertex="1">
          <mxGeometry height="35" width="140" x="660" y="445" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" edge="1" parent="1" source="istio-gw" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#326CE5;endArrow=classic;endSize=8;" target="vs-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="svc-layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#326CE5;strokeWidth=2;verticalAlign=top;align=left;spacingLeft=10;spacingTop=3;fontSize=12;fontStyle=1;fontColor=#326CE5;" value="K8s Services (ClusterIP)" vertex="1">
          <mxGeometry height="80" width="900" x="150" y="525" as="geometry" />
        </mxCell>
        <mxCell id="svc-auth" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#ED8B00;strokeWidth=2;fontSize=9;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="auth&#xa;:8080" vertex="1">
          <mxGeometry height="40" width="70" x="175" y="550" as="geometry" />
        </mxCell>
        <mxCell id="svc-user" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=9;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="user&#xa;:8081" vertex="1">
          <mxGeometry height="40" width="70" x="260" y="550" as="geometry" />
        </mxCell>
        <mxCell id="svc-board" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=9;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="board&#xa;:8000" vertex="1">
          <mxGeometry height="40" width="70" x="345" y="550" as="geometry" />
        </mxCell>
        <mxCell id="svc-chat" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=9;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="chat&#xa;:8001" vertex="1">
          <mxGeometry height="40" width="70" x="430" y="550" as="geometry" />
        </mxCell>
        <mxCell id="svc-noti" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=9;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="noti&#xa;:8002" vertex="1">
          <mxGeometry height="40" width="70" x="515" y="550" as="geometry" />
        </mxCell>
        <mxCell id="svc-storage" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=9;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="storage&#xa;:8003" vertex="1">
          <mxGeometry height="40" width="70" x="600" y="550" as="geometry" />
        </mxCell>
        <mxCell id="svc-ops" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=9;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="ops&#xa;:8005" vertex="1">
          <mxGeometry height="40" width="70" x="685" y="550" as="geometry" />
        </mxCell>
        <mxCell id="svc-ops-portal" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#61DAFB;strokeWidth=2;fontSize=9;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="ops-portal&#xa;:80" vertex="1">
          <mxGeometry height="40" width="70" x="770" y="550" as="geometry" />
        </mxCell>
        <mxCell id="svc-frontend" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#61DAFB;strokeWidth=2;fontSize=9;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="frontend&#xa;:80" vertex="1">
          <mxGeometry height="40" width="70" x="890" y="550" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" edge="1" parent="1" source="vs-box" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#326CE5;endArrow=classic;endSize=8;" target="svc-layer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="pod-layer" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#ED7100;strokeWidth=2;verticalAlign=top;align=left;spacingLeft=10;spacingTop=3;fontSize=12;fontStyle=1;fontColor=#ED7100;" value="Pod (Envoy Sidecar)" vertex="1">
          <mxGeometry height="80" width="900" x="150" y="625" as="geometry" />
        </mxCell>
        <mxCell id="pod-example" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#ED7100;strokeWidth=2;verticalAlign=top;align=center;spacingTop=3;fontSize=10;fontStyle=1;fontColor=#ED7100;" value="Pod (board-service)" vertex="1">
          <mxGeometry height="70" width="280" x="460" y="630" as="geometry" />
        </mxCell>
        <mxCell id="container-app" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=1;fontSize=9;fontColor=#232F3E;align=center;verticalAlign=middle;" value="App&#xa;(:8000)" vertex="1">
          <mxGeometry height="30" width="80" x="490" y="663" as="geometry" />
        </mxCell>
        <mxCell id="container-envoy" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#466BB0;strokeWidth=1;fontSize=9;fontColor=#232F3E;align=center;verticalAlign=middle;" value="Envoy&#xa;(:15001)" vertex="1">
          <mxGeometry height="30" width="80" x="620" y="663" as="geometry" />
        </mxCell>
        <mxCell id="mtls-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=9;fontColor=#666666;fontStyle=2;" value="mTLS: STRICT (prod) / PERMISSIVE (dev)" vertex="1">
          <mxGeometry height="15" width="200" x="180" y="680" as="geometry" />
        </mxCell>
        <mxCell id="arrow5" edge="1" parent="1" source="svc-layer" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#ED7100;endArrow=classic;endSize=8;" target="pod-layer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="comm-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C925D1;strokeWidth=2;verticalAlign=top;align=left;spacingLeft=10;spacingTop=3;fontSize=12;fontStyle=1;fontColor=#C925D1;" value="Inter-Service (mTLS + AuthorizationPolicy)" vertex="1">
          <mxGeometry height="100" width="900" x="150" y="725" as="geometry" />
        </mxCell>
        <mxCell id="comm-board" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=10;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="board" vertex="1">
          <mxGeometry height="30" width="80" x="200" y="760" as="geometry" />
        </mxCell>
        <mxCell id="comm-user" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=10;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="user" vertex="1">
          <mxGeometry height="30" width="80" x="380" y="760" as="geometry" />
        </mxCell>
        <mxCell id="comm-auth" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#ED8B00;strokeWidth=2;fontSize=10;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="auth" vertex="1">
          <mxGeometry height="30" width="80" x="560" y="760" as="geometry" />
        </mxCell>
        <mxCell id="comm-noti" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=10;fontStyle=1;fontColor=#232F3E;align=center;verticalAlign=middle;" value="noti" vertex="1">
          <mxGeometry height="30" width="80" x="740" y="760" as="geometry" />
        </mxCell>
        <mxCell id="comm-arrow1" edge="1" parent="1" source="comm-board" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1.5;strokeColor=#C925D1;endArrow=classic;endSize=6;" target="comm-user">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="comm-arrow2" edge="1" parent="1" source="comm-board" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1.5;strokeColor=#C925D1;endArrow=classic;endSize=6;" target="comm-auth">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="240" y="800" />
              <mxPoint x="600" y="800" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="comm-arrow3" edge="1" parent="1" source="comm-board" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1.5;strokeColor=#C925D1;endArrow=classic;endSize=6;" target="comm-noti">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="240" y="810" />
              <mxPoint x="780" y="810" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="authz-note" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;strokeWidth=1;fontSize=9;fontColor=#232F3E;dashed=1;align=left;spacingLeft=8;" value="Zero-Trust: denyAll + allowList&#xa;Prod: principals-based access&#xa;Dev: PERMISSIVE (all allowed)" vertex="1">
          <mxGeometry height="50" width="175" x="870" y="750" as="geometry" />
        </mxCell>
        <mxCell id="legend-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#CCCCCC;strokeWidth=1;verticalAlign=top;align=left;spacingLeft=8;spacingTop=3;fontSize=11;fontStyle=1;fontColor=#333333;" value="Legend" vertex="1">
          <mxGeometry height="90" width="300" x="750" y="50" as="geometry" />
        </mxCell>
        <mxCell id="legend-spring" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#ED8B00;strokeWidth=2;fontSize=8;fontColor=#232F3E;align=center;verticalAlign=middle;" value="Spring Boot" vertex="1">
          <mxGeometry height="20" width="60" x="765" y="72" as="geometry" />
        </mxCell>
        <mxCell id="legend-go" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00ADD8;strokeWidth=2;fontSize=8;fontColor=#232F3E;align=center;verticalAlign=middle;" value="Go (Gin)" vertex="1">
          <mxGeometry height="20" width="60" x="835" y="72" as="geometry" />
        </mxCell>
        <mxCell id="legend-react" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#61DAFB;strokeWidth=2;fontSize=8;fontColor=#232F3E;align=center;verticalAlign=middle;" value="React" vertex="1">
          <mxGeometry height="20" width="60" x="905" y="72" as="geometry" />
        </mxCell>
        <mxCell id="legend-istio" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#466BB0;strokeWidth=2;fontSize=8;fontColor=#232F3E;align=center;verticalAlign=middle;" value="Istio" vertex="1">
          <mxGeometry height="20" width="60" x="975" y="72" as="geometry" />
        </mxCell>
        <mxCell id="legend-aws" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FF9900;strokeWidth=2;fontSize=8;fontColor=#232F3E;align=center;verticalAlign=middle;" value="AWS" vertex="1">
          <mxGeometry height="20" width="60" x="765" y="100" as="geometry" />
        </mxCell>
        <mxCell id="legend-k8s" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#326CE5;strokeWidth=2;fontSize=8;fontColor=#232F3E;align=center;verticalAlign=middle;" value="K8s" vertex="1">
          <mxGeometry height="20" width="60" x="835" y="100" as="geometry" />
        </mxCell>
        <mxCell id="legend-pod" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#ED7100;strokeWidth=2;fontSize=8;fontColor=#232F3E;align=center;verticalAlign=middle;" value="Pod" vertex="1">
          <mxGeometry height="20" width="60" x="905" y="100" as="geometry" />
        </mxCell>
        <mxCell id="legend-mtls" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C925D1;strokeWidth=2;fontSize=8;fontColor=#232F3E;align=center;verticalAlign=middle;" value="mTLS" vertex="1">
          <mxGeometry height="20" width="60" x="975" y="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
